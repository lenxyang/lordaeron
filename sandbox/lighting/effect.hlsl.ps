// using row_major
#pragma pack_matrix(row_major)

#include "lordaeron/effect/lighting.hlsl"

struct VsOutput {
  float4 position:SV_POSITION;
  float3 normal:NORMAL;
  float3 viewin: VIEWIN;
};

cbuffer c_buffer {
   DirLight dirlight;
   PointLight pointlight;
   float4 color;	
};


float4 ps_main(VsOutput o):SV_TARGET {
  float3 light_intensity = CalcDirLightIntensity(dirlight, o.normal, o.viewin, 32);
  float4 c = float4(light_intensity * color.xyz, color.a);
  return c;
}
